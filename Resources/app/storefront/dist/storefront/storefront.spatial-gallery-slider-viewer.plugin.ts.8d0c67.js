"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5450],{5450:(i,e,t)=>{t.r(e),t.d(e,{default:()=>p});var l=t(8077);class s{static #i=this.options={sliderSelector:".tns-item",gallerySliderSelector:".gallery-slider-row",sliderPositionAttribute:"data-product-slider-position",singleImageGallerySelector:".gallery-slider-single-image",gallerySliderDisabledClass:"gallery-slider-canvas-disabled"};constructor(i){this.sliderElement=null,this.tnsSlider=null,this.sliderPlugin=null,this.plugin=i,this.init()}init(){this.refreshSliderElements(),null!=this.sliderElement&&null!=this.tnsSlider&&this.initEventListeners()}initRender(){let i=this.tnsSlider?.getInfo();(this.plugin.el?.closest(s.options.gallerySliderSelector)?.querySelector(s.options.singleImageGallerySelector)||i?.slideItems[i.index]===this.sliderElement)&&this.plugin.startRendering()}initEventListeners(){this.sliderPlugin?.$emitter.unsubscribe("rebuild",this.rebuildEvent.bind(this)),this.tnsSlider?.events.on("indexChanged",this.indexChangedEvent.bind(this)),this.sliderPlugin?.$emitter.subscribe("rebuild",this.rebuildEvent.bind(this))}removeDisabled(){this.plugin.el?.parentElement?.parentElement?.classList.remove(s.options.gallerySliderDisabledClass)}rebuildEvent(i){window.PluginManager.initializePlugin("SpatialGallerySliderViewer","[data-spatial-gallery-slider-viewer]"),window.PluginManager.initializePlugin("SpatialZoomGallerySliderViewer","[data-spatial-zoom-gallery-slider-viewer]"),window.PluginManager.initializePlugin("SpatialArViewer","[data-spatial-ar-viewer]")}indexChangedEvent(i){this.plugin.sliderIndex==i.index?setTimeout(()=>{this.plugin.sliderIndex==this.tnsSlider.getInfo().index&&this.plugin.startRendering()},500):this.plugin.stopRendering()}refreshSliderElements(){this.sliderElement=this.plugin?.el?.closest(s.options.sliderSelector),this.sliderPlugin=this.getSliderPlugin(),null!=this.sliderPlugin&&(this.tnsSlider=this.sliderPlugin._slider)}getSliderPlugin(){let i=this.plugin?.el?.closest(s.options.gallerySliderSelector);if(null==i||void 0==i)return null;let e=window.PluginManager.getPluginInstanceFromElement(i,"GallerySlider");return null==e?null:e}}var n=t(5469),r=t(4161),a=t(7073),d=t(9183),o=t(9943),h=t(6896);class p extends l.Z{async init(){await (0,h.n)(),this.el&&(this.sliderIndex=Number(this.options.sliderPosition),this.spatialProductSliderRenderUtil=new s(this),this.spatialProductSliderRenderUtil.removeDisabled(),this.initViewer(!0))}initViewer(i){if(super.initViewer(i),this.renderer?.setClearColor(16777215,0),this.camera?.position.set(0,.6,1.2),this.camera?.lookAt(0,0,0),this.spatialOrbitControlsUtil?.dispose(),this.camera&&this.renderer&&(this.spatialOrbitControlsUtil=new a.Z(this.camera,this.renderer.domElement)),this.spatialMovementNoteUtil=new d.Z(this),this.spatialCanvasSizeUpdateUtil=new n.Z(this),(void 0==this.spatialLightCompositionUtil||i)&&(this.spatialLightCompositionUtil?.dispose(),this.scene&&(this.spatialLightCompositionUtil=new o.Z(this.scene,this.options.lightIntensity))),(void 0==this.spatialObjectLoaderUtil||i)&&(this.spatialObjectLoaderUtil=new r.Z(this)),void 0==this.model||i){let i=this.options.modelUrl;if(null==i)return;this.spatialObjectLoaderUtil.loadSingleObjectByUrl(i,{center:!0,clampSize:!0,clampMaxSize:{x:4/3,y:1,z:4/3}}).then(i=>{this.model=i,this.scene&&this.scene.add(this.model),this.setReady(!0)}).catch(()=>{this.el?.parentElement?.parentElement?.classList.add("gallery-slider-canvas-disabled")})}else this.setReady(!0);this.spatialProductSliderRenderUtil?.initRender()}preRender(i){this.spatialCanvasSizeUpdateUtil?.update(),this.spatialOrbitControlsUtil?.update()}postRender(i){}}}}]);