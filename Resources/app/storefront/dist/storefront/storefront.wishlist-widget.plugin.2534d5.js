"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40072],{72:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});var s=i(4335);class n extends s.A{static #t=this.options={showCounter:!0};init(){if(this._getWishlistStorage(),!this._wishlistStorage)throw Error("No wishlist storage found");this._renderCounter(),this._registerEvents(),this._wishlistStorage.load()}_getWishlistStorage(){this._wishlistStorage=window.PluginManager.getPluginInstanceFromElement(this.el,"WishlistStorage")}_renderCounter(){this.options.showCounter&&(this.el.innerHTML=this._wishlistStorage.getCurrentCounter()||"")}_registerEvents(){this.$emitter.subscribe("Wishlist/onProductsLoaded",()=>{this._renderCounter(),window.PluginManager.getPluginInstances("AddToWishlist").forEach(t=>{t.initStateClasses()})}),this.$emitter.subscribe("Wishlist/onProductRemoved",t=>{this._renderCounter(),this._reInitWishlistButton(t.detail.productId)}),this.$emitter.subscribe("Wishlist/onProductAdded",t=>{this._renderCounter(),this._reInitWishlistButton(t.detail.productId)});let t=document.querySelector(".cms-element-product-listing-wrapper");t&&window.PluginManager.getPluginInstanceFromElement(t,"Listing").$emitter.subscribe("Listing/afterRenderResponse",()=>{window.PluginManager.getPluginInstances("AddToWishlist").forEach(t=>{t.initStateClasses()})})}_reInitWishlistButton(t){let e=document.querySelectorAll(".product-wishlist-"+t);e&&e.forEach(t=>{window.PluginManager.getPluginInstanceFromElement(t,"AddToWishlist").initStateClasses()})}}}}]);